<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Name Search Design</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <link rel="stylesheet" href="./design.css">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

</head>
<script>
    var rules = [];
    var results = [];
    rules.push(["A","a"]);rules.push(["A","á"]);rules.push(["AA","á"]);rules.push(["B","b"]);rules.push(["C","c"]);rules.push(["C","č"]);rules.push(["CZ","č"]);rules.push(["CH","č"]);rules.push(["C","k"]);rules.push(["D","d"]);rules.push(["E","e"]);rules.push(["E","é"]);rules.push(["E","ě"]);rules.push(["EW","ů"]);rules.push(["EW","ú"]);rules.push(["EE","ý"]);rules.push(["EE","í"]);rules.push(["E","I"]);rules.push(["EI","aj"]);rules.push(["F","f"]);rules.push(["F","v"]);rules.push(["G","g"]);rules.push(["H","h"]);rules.push(["H","ch"]);rules.push(["I","i"]);rules.push(["I","í"]);rules.push(["IE","ě"]);rules.push(["IE","ý"]);rules.push(["J","j"]);rules.push(["K","k"]);rules.push(["L","l"]);rules.push(["M","m"]);rules.push(["N","n"]);rules.push(["N","ň"]);rules.push(["O","o"]);rules.push(["O","ó"]);rules.push(["OO","ú"]);rules.push(["OO","ů"]);rules.push(["P","p"]);rules.push(["Q","q"]);rules.push(["Q","kv"]);rules.push(["R","r"]);rules.push(["R","ř"]);rules.push(["RZ","ř"]);rules.push(["S","s"]);rules.push(["S","š"]);rules.push(["SCH","š"]);rules.push(["SH","š"]);rules.push(["S","z"]);rules.push(["SS","z"]);rules.push(["T","t"]);rules.push(["TCH","č"]);rules.push(["T","ť"]);rules.push(["U","u"]);rules.push(["U","ú"]);rules.push(["U","ů"]);rules.push(["V","v"]);rules.push(["V","f"]);rules.push(["W","w"]);rules.push(["W","v"]);rules.push(["X","x"]);rules.push(["X","ks"]);rules.push(["Y","y"]);rules.push(["Y","j"]);rules.push(["Y","ý"]);rules.push(["Z","z"]);rules.push(["Z","s"]);rules.push(["Z","ž"]);rules.push(["ß","SS"]);rules.push(["Ü","y"]);rules.push(["Ü","i"]);    
    function updateText() {
        document.getElementById('ns-kurrent').value = document.getElementById('ns-firstName').value + " " + document.getElementById('ns-surname').value;
        document.getElementById('ns-schwabacher').value = document.getElementById('ns-firstName').value + " " + document.getElementById('ns-surname').value;
    }

    function translateName(surname) {
        var translations = [];
    }

    function addLetter(letter, selector) {
       $(selector).val($(selector).val()+letter);
    }
    
    function transcribeName(name){
        var results = transcribeRecurs(name.toUpperCase(),[]);
        for(var i = 0; i < results.length; i++){
            console.log(results[i]);
        }
    }
    
    function transcribeRecurs(string, results){
        //string is already fully transcribed
        if(string.toLowerCase() == string){
            if(results.indexOf(string) == -1){
                results.push(string);
            }
            return results;
        }
        //try all rules
        for(var i = 0; i < rules.length; i++){
            var from = rules[i][0];
            var to = rules[i][1];
            var str = string;
            if(str.includes(from)){
                str=str.replace(from,to);
                results = transcribeRecurs(str,results);
            }
        }
        return results;
    }
    
    //transcribeName("Vaschicek");
    

    function changeFont(fontType, selector) {
        $(selector).css("fontFamily", fontType);
    }

    function changeCase(caseType, selector) {
        $(selector).css("textTransform", caseType);
    }
    
    function copyInput(sSelector,tSelector){
        $(tSelector).val($(sSelector).val());
    }
    

    function updateFemaleVariant(surname) {
        var surnames = [];
        //I
        //I.A
        //I.A.1
        if (surname.search(/[^e][bcčdďfghjklmnňpqrřsštťvwxzž]$/) != -1) {
            surnames.push(surname + "ová");
        }
        //I.A.2
        else if (surname.search(/[e][bcčdďfghjklmnňpqrřsštťvwxzž]$/) != -1) {
            //I.A.2.a
            surnames.push(surname + "ová");
            //I.A.2.ba
            if (surname.search(/ec$/) != -1) {
                surnames.push(surname.replace(/ec$/, "cová"));
            }
            //I.A.2.bb
            if (surname.search(/ek$/) != -1) {
                surnames.push(surname.replace(/ek$/, "ková"));
            }
            //I.A.2.bc
            if (surname.search(/eš$/) != -1) {
                surnames.push(surname.replace(/eš$/, "šová"));
            }
            //I.A.2.bd
            if (surname.search(/el$/) != -1) {
                surnames.push(surname.replace(/el$/, "lová"));
            }
            if (surname.search(/ev$/) != -1) {
                surnames.push(surname.replace(/ev$/, "vová"));
            }
        }
        //I.B
        else if (surname.search(/[aeěiyou]$/)) {
            surnames.push(surname.replace(/o*.$/, "ová"));
        }
        //II
        //II.1

        var select = document.getElementById("ns-femaleVariant");
        select.options.length = 0;
        for (i = 0; i < surnames.length; i++) {
            var option = document.createElement("option");
            option.text = surnames[i];
            select.add(option);
        }

    }

</script>

<body>

</body>
<div class="container">
    <div class="row">
        <h1 class="col-12">Genealogy Tools</h1>
    </div>
    <hr>
    <!--    <div class="row">
        <div class="col-12 col-md-6">
            <label for="ns-engSurname">First Name:</label>
            <input type="text" id="ns-firstName" onkeyup="updateText();">
        </div>
        <div class="col-12 col-md-6">
            <label for="ns-schwabacher">Surname:</label>
            <input type="text" id="ns-surname" onkeyup="updateText();">
        </div>
    </div>
    <div class="row">
        <div class=" col-12 col-md-6 ">
            <label for="ns-schwabacher">Schwabacher:</label>
            <input type="text " id="ns-schwabacher" readonly>
        </div>
        <div class="col-12 col-md-6 ">
            <label for="ns-kurrent ">Kurrent:</label>
            <input type="text " id="ns-kurrent" readonly>
        </div>
    </div>
    <div class="row ">
        <div class="col-12 col-md-6">
            <label for="ns-translation ">Czech translation:</label>
            <select id="ns-translation " onchange="updateFemaleVariant(this.value);">
                 test options !
                <option>Havlas</option>
                <option>Chmel</option>
                <option>Kadlec</option>
                <option>Havránek</option>
                <option>Tomeš</option>
                <option>Lev</option>
                <option>Havel</option>
            </select>
        </div>
        <div class="col-12 col-md-6">
            <label for="ns-femaleVariant">Female Surname:</label>
            <select id="ns-femaleVariant">
            <option disabled>Select a translation</option>
            </select>
        </div>
    </div>
    <hr>
    <h2>Schwabacher typing</h2>
    <div class="row">
        <input type="text" id="typingBox" class="swab">
        <div class="col"><button class="swab" onclick="addLetter(this.innerText);">A</button><br>A</div>
        <div class="col"><button class="swab" onclick="addLetter(this.innerText);">B</button><br>B</div>
        <div class="col"><button class="swab" onclick="addLetter(this.innerText);">C</button><br>C</div>
        <div class="col"><button class="swab" onclick="addLetter(this.innerText);">D</button><br>D</div>

    </div>-->
    <h2>Old German Typing</h2>
    <hr>
    <div class="row">
        <div class="col-12 col-md-6">
            <input type="text" id="gt-typer">
        </div>
        <div class="col-4 col-md-2">
            <select id="gt-fontSelect" onchange="changeFont(this.value, '#gt-typer');">
                <option value="inherit" selected="selected">Latin</option>
                <option value=" amptmann">Amptmann</option>
                <option value="contgen">Contgen</option>
                <option value="friedolin">Friedolin</option>
                <option value="greifswalder">Greifswalder</option>
                <option value="kurrent">Kurrent</option>
                <option value="leipzig">Leipzig</option>
                <option value="rudelskopf">Rudelskopf</option>
                <option value="schwabacher">Schwabacher</option>
            </select>
        </div>
        <div class="col-8 col-md-4">
            <!--  TODO redo in php? -->
            <button onclick="addLetter('ä','#gt-typer')">ä</button> <button onclick="addLetter('Ä','#gt-typer')">Ä</button> <button onclick="addLetter('ö','#gt-typer')">ö</button> <button onclick="addLetter('Ö','#gt-typer')">Ö</button> <button onclick="addLetter('ü','#gt-typer')">ü</button> <button onclick="addLetter('Ü','#gt-typer')">Ü</button> <button onclick="addLetter('ß','#gt-typer')">ß</button> </div>
    </div>
    <h2>Character table</h2>
    <hr>
    <div class="row">
        <div class="col-12 col-md-8">
            <table id="characterTable" class="table table-striped">
                
                    <tr>
                        <td>a</td>
                        <td class='gt-gerFont'>a</td>
                    </tr>
                    
                    <tr>
                        <td>ä</td>
                        <td class='gt-gerFont'>ä</td>
                    </tr>
                    
                    <tr>
                        <td>b</td>
                        <td class='gt-gerFont'>b</td>
                    </tr>
                    
                    <tr>
                        <td>c</td>
                        <td class='gt-gerFont'>c</td>
                    </tr>
                    
                    <tr>
                        <td>d</td>
                        <td class='gt-gerFont'>d</td>
                    </tr>
                    
                    <tr>
                        <td>e</td>
                        <td class='gt-gerFont'>e</td>
                    </tr>
                    
                    <tr>
                        <td>f</td>
                        <td class='gt-gerFont'>f</td>
                    </tr>
                    
                    <tr>
                        <td>g</td>
                        <td class='gt-gerFont'>g</td>
                    </tr>
                    
                    <tr>
                        <td>h</td>
                        <td class='gt-gerFont'>h</td>
                    </tr>
                    
                    <tr>
                        <td>i</td>
                        <td class='gt-gerFont'>i</td>
                    </tr>
                    
                    <tr>
                        <td>j</td>
                        <td class='gt-gerFont'>j</td>
                    </tr>
                    
                    <tr>
                        <td>k</td>
                        <td class='gt-gerFont'>k</td>
                    </tr>
                    
                    <tr>
                        <td>l</td>
                        <td class='gt-gerFont'>l</td>
                    </tr>
                    
                    <tr>
                        <td>m</td>
                        <td class='gt-gerFont'>m</td>
                    </tr>
                    
                    <tr>
                        <td>n</td>
                        <td class='gt-gerFont'>n</td>
                    </tr>
                    
                    <tr>
                        <td>o</td>
                        <td class='gt-gerFont'>o</td>
                    </tr>
                    
                    <tr>
                        <td>ö</td>
                        <td class='gt-gerFont'>ö</td>
                    </tr>
                    
                    <tr>
                        <td>p</td>
                        <td class='gt-gerFont'>p</td>
                    </tr>
                    
                    <tr>
                        <td>q</td>
                        <td class='gt-gerFont'>q</td>
                    </tr>
                    
                    <tr>
                        <td>r</td>
                        <td class='gt-gerFont'>r</td>
                    </tr>
                    
                    <tr>
                        <td>s</td>
                        <td class='gt-gerFont'>s</td>
                    </tr>
                    
                    <tr>
                        <td>ß</td>
                        <td class='gt-gerFont'>ß</td>
                    </tr>
                    
                    <tr>
                        <td>t</td>
                        <td class='gt-gerFont'>t</td>
                    </tr>
                    
                    <tr>
                        <td>u</td>
                        <td class='gt-gerFont'>u</td>
                    </tr>
                    
                    <tr>
                        <td>ü</td>
                        <td class='gt-gerFont'>ü</td>
                    </tr>
                    
                    <tr>
                        <td>v</td>
                        <td class='gt-gerFont'>v</td>
                    </tr>
                    
                    <tr>
                        <td>w</td>
                        <td class='gt-gerFont'>w</td>
                    </tr>
                    
                    <tr>
                        <td>x</td>
                        <td class='gt-gerFont'>x</td>
                    </tr>
                    
                    <tr>
                        <td>y</td>
                        <td class='gt-gerFont'>y</td>
                    </tr>
                    
                    <tr>
                        <td>z</td>
                        <td class='gt-gerFont'>z</td>
                    </tr>
                                </table>
        </div>
        <div class="col-12 col-md-4">
            <select id="gt-fontSelect" onchange="changeFont(this.value, '.gt-gerFont');">
                <option value="" selected="selected" disabled>Select a font</option>
                <option value=" amptmann">Amptmann</option>
                <option value="contgen">Contgen</option>
                <option value="friedolin">Friedolin</option>
                <option value="greifswalder">Greifswalder</option>
                <option value="kurrent">Kurrent</option>
                <option value="leipzig">Leipzig</option>
                <option value="rudelskopf">Rudelskopf</option>
                <option value="schwabacher">Schwabacher</option>
            </select>
            <select id="gt-caseSelect" onchange="changeCase(this.value, '#characterTable');">
                <option value="lowercase">Lowercase</option>
                <option value="uppercase">Uppercase</option>
            </select>
        </div>
    </div>
</div>

</html>
